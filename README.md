# samfs [![Build Status](https://travis-ci.com/smihir/samfs.svg?token=tBqNgPsKZYi2s5J9Bd2z&branch=master)](https://travis-ci.com/smihir/samfs)
Samfs is a NFS like filesystem designed for CS739.

## Installing Go
The filesystem is written in Go. Instructions to install Go can be found [here](https://golang.org/doc/install#install).
Nevertheless, here is a small step by step guide:
- Download Go tarball for your platform from [here](https://golang.org/dl/)
- Extract the taball to directory where you want to keep go, let's call it "TOOLCHAIN"
- Now you need to set the following environment variables for Go to function:
  - GOPATH: set it to the directory where you want all your Go code to reside. No Go code you want to compile can reside outside this directory.
  - GOBIN: set it to the directory where you want all the binaries installed by *go install* to be copied. Its a good idea to add GOBIN to PATH so that the installed binaries can be executed easily, also it is required if you are using vim-go for browsing code.
  - GOROOT: this is required to be set to the root of your Go installation unless you have installed Go at **/usr/local/go**
```
export GOROOT = <TOOLCHAIN>/go
export GOPATH = <Path to directory where you want all your go code>
export GOBIN = <Path to directory where binaries compiled by *go install* are placed>
export PATH = <TOOLCHAIN>/go/bin:$GOBIN:$PATH
```

## Downloading samfs for development
Once you setup Go. You can download samfs by running:
```
go get github.com/smihir/samfs
```
Your code with be present in **$GOPATH/src/github.com/smihir/samfs**

## Code Structure
```
.
|-- LICENSE
|-- Makefile
|-- bin                                   # binaries compiled by Makefile are copied in this directory
|   |-- samfs-server
|   `-- samfsc
|-- samfs.go                              # this file is added to silence errors from "go get"
|-- src
|   |-- cmd                               # just top level code for server and client binaries.
|   |   |-- samfs-server                  # dont add client/server logic here.
|   |   |   `-- main.go
|   |   `-- samfsc
|   |       `-- main.go
|   |-- proto                             # proto files go here
|   |   |-- messages.pb.go
|   |   `-- messages.proto
|   `-- samfs                             # the meat of our code goes here
|       |-- client.go                     # client logic in client.go
|       `-- server.go                     # server logic in server.go, create more files if requried.
|-- tools                                 # contains helper tools for compilation.
|   |-- bin
|   `-- protoc
|       |-- protoc-3.1.0-linux-x86_64
|       |   |-- bin
|       |   `-- include
|       |       `-- google
|       |           `-- protobuf
|       |               `-- compiler
|       `-- protoc-3.1.0-osx-x86_64
|           |-- bin
|           `-- include
|               `-- google
|                   `-- protobuf
|                       `-- compiler
`-- vendor                                # contains third party code
                                          # contents of this folder are generated by govendor
                                          # please don't add anything manually
```
